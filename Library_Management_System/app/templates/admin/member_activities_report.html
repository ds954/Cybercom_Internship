{% extends 'admin/admin_base.html' %}



{% block admin_content %}

<h1>Member Activities Report</h1>
<style>
      h1{
        font-weight: 500;
    }
      th {
        background-color: #89aec1; /* Light Green for Members (first column) */
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    table{
        width: 100%;
    }
</style>

<!-- User Details Table -->
<h1>User Details</h1>
<table border="1" class="table" style="margin-bottom: 50px;">
    <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Firstname</th>
        <th>Lastname</th>
        <th>Phone</th>
        <th>Registration Date</th>
    </tr>
    {% for user in users %}
    <tr>
        <td>{{ user.Username }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.firstname }}</td>
        <td>{{ user.lastname }}</td>
        <td>{{ user.phone }}</td>
        <td>{{ user.created_at }}</td>
    </tr>
    {% endfor %}
</table>

<!-- Borrow Requests & Notifications Table -->
<h1>Borrow Requests & Notifications</h1>
<table border="1" style="margin-bottom: 50px;">
    <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Borrow Requests</th>
        <th>Notifications</th>
    </tr>
    {% for user_data in user_data %}
    <tr>
        <td>{{ user_data.user.Username }}</td>
        <td>{{ user_data.user.email }}</td>
        <td>{{ user_data.borrow_count }}</td>
        <td>{{ user_data.notification_count }}</td>
    </tr>
    {% endfor %}
</table>

<!-- Borrow History Table -->
<h1>Borrow History</h1>
<table border="1" >
    <tr>
        <th>Username</th>
        <th>Book Title</th>
        <th>Status</th>
        <th>Issued Date</th>
        <th>Due Date</th>
    </tr>
    {% for borrow in borrow_requests %}
    <tr>
        <td>{{ borrow.user.Username }}</td>
        <td>{{ borrow.book.title }}</td>
        <td>{{ borrow.status }}</td>
        <td>{{ borrow.IssuedDate }}</td>
        <td>{{ borrow.Duedate }}</td>
    </tr>
    {% endfor %}
</table>


<!-- Download PDF Button -->
<button style="margin-top: 50px;"><a href="{% url 'download_member_activities_report' %}" class="btn btn-primary" style="text-decoration: none; color: black; ">Download PDF</a></button>
{% endblock %}
