{% extends "base.html" %}
{% load static %}

    {% block title %}Library Sidebar{% endblock %}
    
    
    {% block extra_head %}
    <!-- <script src="{% static 'js/auth.js' %}" defer></script> -->
    <style>
        
        .sidebar {
            width: 250px;
            height: 100vh;
            background-color: #cea387;
            color: white;
            padding: 20px;
            position: fixed;
            left: 0;
            top: 0;
            margin-top: 50px;
        }
        .sidebar h2 {
            text-align: center;
            border-bottom: 1px solid gray;
            padding-bottom: 10px;
        }
        .sidebar-menu {
            list-style: none;
            padding: 0;
        }
        .sidebar-menu li {
            padding: 10px;
            cursor: pointer;
        }
        .sidebar-menu li a {
            text-decoration: none;
            color: white;
            display: block;
        }
        .sidebar-menu li:hover {
            background-color: #e3c09f;
        }
        .editable {
            border: none;
            background: none;
            color: white;
            width: 100%;
            font-size: 16px;
        }
        main{
            max-height: 400px;
            height: 300px;
            width: 1000px;
        }
.dashboard-content {
    flex: 1;
    padding: 20px;
    align-items: start;
}
.Welcome{
    margin-bottom: 50px;
    margin-top: 50px;
}
.summary {
    display: flex;
    justify-content: space-between;
    gap: 20px;
}
.summary {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3 columns */
    grid-template-rows: repeat(2, auto); /* 2 rows */
    gap: 20px;
}


.card {
    border: solid 1px black;
    padding: 20px;
    border-radius: 5px;
    background-color: white;
    box-shadow: 0 4px 8px rgb(0, 0, 0,0.1);
    flex: 1;
    text-align: center;
}

.overdue {
    border: solid 1px black;
    color: black;
}

.renewals, .pending{
    border: solid 1px black;
    color: black;
}

.returned,.notifications{
    border: solid 1px black;
    color: black;
}



 /* .notifications {
    border-radius: 5px;
    background-color: #fffafa; 
     background-color: white;
    box-shadow: 0 4px 8px rgb(0, 0, 0,0.1);
    border: solid 1px black;
    margin-top: 30px;
    padding: 10px;
    
    text-align: center;
    border: solid 1px black;
    color: black;

} */

 /* .notifications ul {
    list-style: none;
    padding: 0;
} */
footer{
    position: fixed;
}

    </style>
{% endblock %}

{% block content %}
    {% block search-content %}
    {% endblock %}
    <!-- Sidebar -->
    <div class="sidebar">
        <ul class="sidebar-menu">
            <!-- <li><a href="{% url 'book' %}">Books</a></li>
            <li><a href="{% url 'borrow_history' %}">History</a></li> -->
            <li><a href="{% url 'about' %}">About Us</a></li>
            <li><a href="{% url 'contactus' %}">Contact Us</a></li>
            <li><a href="{% url 'privacy' %}">Privacy Policy</a></li>
            <li><a href="{% url 'terms' %}">Terms of Service</a></li>
        </ul>
    </div>
    <div class="dashboard-content">
        <section class="Welcome"> <h1>Welcome, {{ user.firstname }} </h1></section>
        

        <section class="summary">
            <div class="card">
                <a href="{% url 'user_book' %}" style="text-decoration: none; color: black;"><h3>My Books</h3></a>
                <p>{{ borrowed_count }}</p>
            </div>
            <div class="card pending">
                <a href="{% url 'pending_request' %}" style="text-decoration: none; color: black;"><h3>Pending Request</h3></a>
                <p>{{ pending_count }}</p>
            </div>
            <div class="card renewals">
                <a href="{% url 'pending_renewal' %}" style="text-decoration: none; color: black;"><h3>Pending Renewals</h3></a>
                <p>{{ renewal_count }}</p>
            </div>
            <div class="card returned">
                <a href="{% url 'returned_books' %}" style="text-decoration: none; color: black;"><h3>Returned books</h3></a>
                <p>{{ returned_count }}</p>
            </div>
            <div class="card overdue">
                <a href="{% url 'user_duebook' %}" style="text-decoration: none; color: black;"><h3>Overdue Books</h3></a>
                <p>{{ overdue_count }}</p>
            </div>
            <div class="card notifications">
                <a href="{% url 'notification' %}" style="text-decoration: none; color: black;"><h3>Notifications</h3></a>
                <p>{{notification_count}}</p>
            </div>
        </section>
        
        
        <!-- <section class="notifications">
            <a href="{% url 'notification' %}" style="text-decoration: none; color: black;"><h3>Notifications</h3></a>
            <p>{{notification_count}}</p>
           
        </section> -->
        </div>
    {% endblock %}

    {% block extra_scripts %}

    <!-- <script>
    
        async function refreshToken() {
            try {
                const response = await fetch('/refresh-token/', {
                    method: 'GET',
                    credentials: 'include'  // Send cookies (important!)
                });
    
                if (response.ok) {
                    console.log("Access token refreshed.");
                    window.location.reload();  // Reload page to apply new token
                } else {
                    console.log("Refresh token expired. Redirecting to login.");
                    window.location.href = '/login/';  // Redirect if refresh fails
                }
            } catch (error) {
                console.error("Error refreshing token:", error);
                window.location.href = '/login/';
            }
        }
    
        
    </script>
{% endblock %}    

 -->
